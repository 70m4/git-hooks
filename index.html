<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Git-hooks by git-hooks</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Git-hooks</h1>
        <p>Hook manager</p>
        <p class="view"><a href="https://github.com/git-hooks/git-hooks">View the Project on GitHub <small>git-hooks/git-hooks</small></a></p>
        <ul>
          <li><a href="https://github.com/git-hooks/git-hooks/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/git-hooks/git-hooks/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/git-hooks/git-hooks">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>git-hooks is currently at the stage of managing client-side hooks. It will support server-side hooks future.</p>

<p>git-hooks is a fork of <a href="https://github.com/icefox/git-hooks">icefox/git-hooks</a>. The article “<a href="http://benjamin-meyer.blogspot.jp/2010/06/managing-project-user-and-global-git.html">Managing Project, User, and Global git hooks</a>” explains much of the purpose of using git-hooks. </p>

<p>Below, I will explain git-hooks as well as the new features in this fork.</p>

<h2>
<a id="terminology" class="anchor" href="#terminology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Terminology</h2>

<ul>
<li>
<strong>git-hooks:</strong> The tool created by this repo</li>
<li>
<strong>trigger:</strong> Hook type (such as <code>pre-commit</code> and <code>commit-msg</code>)</li>
<li>
<strong>hook:</strong> Specific hook</li>
<li>
<strong>community hook:</strong> a commonly used hook. Also referred to as <code>contrib</code> hooks in the source code.</li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Run <code>git hooks install</code> to tell a git repo to use git-hooks.</p>

<p>Stop using git-hooks by <code>git hooks uninstall</code>.</p>

<p>List all scope of hooks by execute <code>git hooks</code> directly. See below for what scope is.</p>

<h2>
<a id="scope" class="anchor" href="#scope" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scope</h2>

<p>git-hooks tries to reduce hook copies by using symbolic links to manage them.</p>

<p>Take <code>pre-commit</code> hook as an example. When git triggers <code>pre-commit</code>, git-hooks routes the execution to:</p>

<ol>
<li>
<code>githooks</code> directory under the repo directory,</li>
<li>
<code>~/.githooks</code> directory under home directory, and </li>
<li>the directory configured by <code>git config --set --system hooks.global</code>.</li>
</ol>

<p>These three directories are called <code>project</code> scope, <code>user</code> scope, and <code>global</code> scope.</p>

<p><code>project</code> scope hooks reside under repo directory. Here’s an example layout:</p>

<pre><code>some-project
└── githooks
    ├── commit-msg
    │   └── check
    │   └── check2
    └── pre-commit
        └── check
        └── check2
</code></pre>

<p>When git triggers <code>pre-commit</code>, all hooks under <code>githooks/pre-commit</code> will be executed.</p>

<p>By <code>project</code> scope, we can add project-related hooks into version control, and separate them into multiple files.</p>

<p><code>user</code> hooks reside in the user’s home directory under the name <code>.githooks</code>.  It contains the same directory structure as <code>project</code> hooks. With user hooks, you can setup personal hooks for all your projects.</p>

<pre><code>home
└── someuser
    └── .githooks
        ├── commit-msg
        │   └── check
        │   └── check2
        └── pre-commit
            └── check
            └── check2
</code></pre>

<p><code>global</code> scope hooks is configured via <code>hooks.global</code> entry in git's system-wide configuration. It allows multiple users on the same machine to share hooks.</p>

<pre><code>usr
└── local
    └── share
        └── githooks
            ├── commit-msg
            │   └── check
            │   └── check2
            └── pre-commit
                └── check
                └── check2
</code></pre>

<p>Git's system configuration is usually found in <code>/etc/gitconfig</code> or <code>/usr/local/etc/gitconfig</code>.</p>

<p>Use <code>git config --system --set hooks.global</code> to setup your global hooks directory.</p>

<pre><code>[hooks]
    global = /usr/local/share/githooks
</code></pre>

<p>Wait a minute.... What if I want to have a hook for a particular project <em>and</em> particular user? It can't be added in version control, or into <code>user</code> scope directory. </p>

<p>The solution is <code>semi</code> scope. <code>semi</code> scope actually reside inside <code>project</code> scope,</p>

<pre><code>some-project
└── githooks
    ├── .gitignore
    ├── _pre-commit
    │   └── check
    │   └── check2
    ├── commit-msg
    │   └── check
    │   └── check2
    └── pre-commit
        └── check
        └── check2
</code></pre>

<p>Now, when git triggers <code>pre-commit</code>, all hooks under <code>githooks/pre-commit</code> <strong>and</strong> <code>git-hooks/_pre-commit</code> will be executed.</p>

<p>In order to setup hooks as user-related, <code>.gitignore</code> should be written as</p>

<pre><code>_*
</code></pre>

<h2>
<a id="community-hooks" class="anchor" href="#community-hooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Community Hooks</h2>

<p>This is where git-hooks differs from <a href="https://github.com/icefox/git-hooks">icefox/git-hooks</a>; it adds the feature of <strong>community hooks</strong>.</p>

<p>Let’s look at the <code>pre-commit</code> hook in <code>project</code> scope. When git triggers <code>pre-commit</code>, besides scanning <code>githooks</code>, git-hooks also read <code>githooks.json</code>. </p>

<p>For this example, the contents of <code>githooks.json</code> are:</p>

<div class="highlight highlight-javascript"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>pre-commit<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">"</span>github.com/git-hooks/contrib<span class="pl-pds">"</span></span><span class="pl-k">:</span> [
            <span class="pl-s"><span class="pl-pds">"</span>bashlint<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>jshint<span class="pl-pds">"</span></span>
        ]
    }
}</pre></div>

<p>In the JSON, hooks under the <code>"pre-commit"</code> field will be executed. </p>

<p>It’s organized as another git repository. The repository will be cloned into the <code>~/.githooks-contrib</code> directory. (It will be created if it doesn't exist.)</p>

<p>See <a href="https://github.com/git-hooks/git-hooks/wiki/Community-hooks">Community hooks</a> for more info.</p>

<p><img src="assets/xmind.png" alt="xmind"></p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/git-hooks">git-hooks</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-41494270-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>